# 产品需求文档 (PRD) - 清晏小站 v2.0

## 1. 项目概述
本项目旨在将原有的单页祝福网站升级为具有古风雅致体验的互动站点。在保留原有静态密码验证的基础上，新增“寄语信箱”、“长信锦书”和“节日贺卡”三大核心功能模块，并通过 JSON 文件实现内容的低成本维护。

## 2. 用户流程
1.  **进入页面**：展示“请启封”密码输入界面（保留原有逻辑）。
2.  **验证通过**：输入正确密码（0214）后，进入主界面。
3.  **主界面交互**：
    *   默认显示 **【轩窗】（首页/寄语）**。
    *   通过顶部导航栏切换至 **【锦书】（信箱/长信）** 或 **【百宝阁】（贺卡）**。

## 3. 功能模块详解

### 3.1. 顶部导航栏
*   **风格**：古朴雅致，使用 SVG 图标。
*   **选项**：
    1.  **轩窗** (Home)：对应首页寄语功能。
    2.  **锦书** (Mailbox)：对应长篇信件阅读功能。
    3.  **百宝阁** (Cards)：对应节日贺卡功能。
*   **交互**：点击切换 Tab，内容区带有淡入淡出（Fade-in/out）转场效果。

### 3.2. 模块一：轩窗（随机寄语）
*   **功能**：每次进入或点击刷新按钮，从数据源中随机展示一条短寄语。
*   **展示内容**：
    *   寄语正文（繁体）。
    *   落款/出处。
    *   日期（新增需求）。
*   **数据源**：`data/messages.json`
*   **交互**：提供一个“换一句”的优雅按钮（如折扇或印章样式）。

### 3.3. 模块二：锦书（长信信箱）
*   **功能**：展示长篇书信列表，支持点击阅读详情。
*   **列表页**：按日期倒序排列，显示标题、日期和摘要。
*   **详情页**：
    *   **排版**：**竖排版**（`writing-mode: vertical-rl`），从右向左阅读。
    *   **字体**：繁体中文，使用书法或宋体风格。
    *   **格式**：支持 Markdown 渲染（通过 `marked.js`）。
    *   **翻页**：底部提供“上一封”、“下一封”导航（按日期）。
*   **数据源**：
    *   索引：`data/letters_index.json`
    *   内容：`data/letters/*.md`

### 3.4. 模块三：百宝阁（节日贺卡）
*   **功能**：网格展示不同节日的贺卡封面。
*   **交互动画**：
    *   **初始状态**：贺卡关闭（类似信封或双开门）。
    *   **点击交互**：触发 CSS 3D 翻转或开门动画，展示内部祝福语。
*   **样式**：根据节日（春节、教师节、中秋等）区分不同配色和纹理。
*   **数据源**：`data/cards.json`

## 4. 数据结构设计

### 4.1. 寄语 (`data/messages.json`)
```json
[
  {
    "content": "桃李不言，下自成蹊。",
    "author": "《史記》",
    "date": "2025-09-10"
  }
]
```

### 4.2. 信件索引 (`data/letters_index.json`)
```json
[
  {
    "id": "2025-09-10-chulin",
    "title": "致楚林：桃李春風",
    "date": "2025-09-10",
    "file": "data/letters/2025-09-10-chulin.md",
    "preview": "秋意漸濃..."
  }
]
```

### 4.3. 贺卡 (`data/cards.json`)
```json
[
  {
    "id": "card-teacher-2025",
    "title": "教師節快樂",
    "festival": "教師節",
    "style": "bamboo", // 样式枚举：bamboo, red, moon
    "content": "師恩難忘..."
  }
]
```

## 5. 视觉与技术规范

### 5.1. 视觉风格
*   **配色**：大地色系为主（#8c6b5d, #5c4033），辅以朱红、竹青、月白。
*   **字体**：
    *   标题/书法：`Ma Shan Zheng` (Google Fonts)
    *   正文/繁体：`Noto Serif TC` (Google Fonts)
*   **纹理**：宣纸、水墨背景。

### 5.2. 技术栈
*   **核心**：原生 HTML5 / CSS3 / JavaScript (ES6+)。
*   **依赖**：
    *   `marked.js` (CDN)：用于解析 Markdown。
    *   `DOMPurify` (CDN)：用于清洗 HTML 防止 XSS（可选，视安全性需求）。
*   **部署**：GitHub Pages (静态托管)。

## 6. 目录结构
```
/
├── index.html          # 核心入口（包含所有逻辑）
├── README.md           # 项目说明
├── prd.md              # 本文档
└── data/               # 数据存储
    ├── messages.json   # 寄语数据
    ├── cards.json      # 贺卡数据
    ├── letters_index.json # 信件索引
    └── letters/        # Markdown 信件文件
        └── 2025-09-10-chulin.md
```
